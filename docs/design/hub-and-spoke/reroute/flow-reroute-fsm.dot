digraph {
compound=true;
subgraph cluster_StateMachine {
label="org.openkilda.wfm.topology.flowhs.fsm.reroute.FlowRerouteFsm";
PATHS_SWAPPED [label="PATHS_SWAPPED"];
FINISHED [label="FINISHED"];
VALIDATING_NON_INGRESS_RULES [label="VALIDATING_NON_INGRESS_RULES"];
INSTALLING_NON_INGRESS_RULES [label="INSTALLING_NON_INGRESS_RULES"];
REVERTING_NEW_RULES [label="REVERTING_NEW_RULES"];
REVERTING_PATHS_SWAP [label="REVERTING_PATHS_SWAP"];
PATHS_SWAP_REVERTED [label="PATHS_SWAP_REVERTED"];
NEW_RULES_REVERTED [label="NEW_RULES_REVERTED"];
PROTECTED_RESOURCES_ALLOCATED [label="PROTECTED_RESOURCES_ALLOCATED"];
RESOURCE_ALLOCATION_COMPLETED [label="RESOURCE_ALLOCATION_COMPLETED"];
OLD_RULES_REMOVED [label="OLD_RULES_REMOVED"];
NON_INGRESS_RULES_VALIDATED [label="NON_INGRESS_RULES_VALIDATED"];
RESOURCES_ALLOCATION_REVERTED [label="RESOURCES_ALLOCATION_REVERTED"];
OLD_RESOURCES_DEALLOCATED [label="OLD_RESOURCES_DEALLOCATED"];
UPDATING_FLOW_STATUS [label="UPDATING_FLOW_STATUS"];
REMOVING_OLD_RULES [label="REMOVING_OLD_RULES"];
DEALLOCATING_OLD_RESOURCES [label="DEALLOCATING_OLD_RESOURCES"];
REVERTING_ALLOCATED_RESOURCES [label="REVERTING_ALLOCATED_RESOURCES"];
INITIALIZED [label="INITIALIZED"];
VALIDATING_INGRESS_RULES [label="VALIDATING_INGRESS_RULES"];
INSTALLING_INGRESS_RULES [label="INSTALLING_INGRESS_RULES"];
PRIMARY_RESOURCES_ALLOCATED [label="PRIMARY_RESOURCES_ALLOCATED"];
FLOW_STATUS_UPDATED [label="FLOW_STATUS_UPDATED"];
FLOW_VALIDATED [label="FLOW_VALIDATED"];
NEW_PATHS_INSTALLATION_COMPLETED [label="NEW_PATHS_INSTALLATION_COMPLETED"];
INGRESS_RULES_INSTALLED [label="INGRESS_RULES_INSTALLED"];
FINISHED_WITH_ERROR [label="FINISHED_WITH_ERROR"];
NON_INGRESS_RULES_INSTALLED [label="NON_INGRESS_RULES_INSTALLED"];
REVERTING_FLOW_STATUS [label="REVERTING_FLOW_STATUS"];
MARKING_FLOW_DOWN [label="MARKING_FLOW_DOWN"];
OLD_PATHS_REMOVAL_COMPLETED [label="OLD_PATHS_REMOVAL_COMPLETED"];
INGRESS_RULES_VALIDATED [label="INGRESS_RULES_VALIDATED"];

PATHS_SWAPPED -> INSTALLING_INGRESS_RULES [ label="NEXT"];
PATHS_SWAPPED -> REVERTING_PATHS_SWAP [ label="TIMEOUT"];
PATHS_SWAPPED -> REVERTING_PATHS_SWAP [ label="ERROR"];
VALIDATING_NON_INGRESS_RULES -> VALIDATING_NON_INGRESS_RULES [ label="COMMAND_EXECUTED"];
VALIDATING_NON_INGRESS_RULES -> NON_INGRESS_RULES_VALIDATED [ label="RULES_VALIDATED"];
VALIDATING_NON_INGRESS_RULES -> PATHS_SWAP_REVERTED [ label="TIMEOUT"];
VALIDATING_NON_INGRESS_RULES -> PATHS_SWAP_REVERTED [ label="MISSING_RULE_FOUND"];
VALIDATING_NON_INGRESS_RULES -> PATHS_SWAP_REVERTED [ label="ERROR"];
INSTALLING_NON_INGRESS_RULES -> INSTALLING_NON_INGRESS_RULES [ label="COMMAND_EXECUTED"];
INSTALLING_NON_INGRESS_RULES -> NON_INGRESS_RULES_INSTALLED [ label="RULES_INSTALLED"];
INSTALLING_NON_INGRESS_RULES -> PATHS_SWAP_REVERTED [ label="TIMEOUT"];
INSTALLING_NON_INGRESS_RULES -> PATHS_SWAP_REVERTED [ label="ERROR"];
REVERTING_NEW_RULES -> REVERTING_NEW_RULES [ label="COMMAND_EXECUTED"];
REVERTING_NEW_RULES -> NEW_RULES_REVERTED [ label="RULES_REMOVED"];
REVERTING_NEW_RULES -> NEW_RULES_REVERTED [ label="ERROR"];
REVERTING_PATHS_SWAP -> PATHS_SWAP_REVERTED [ label="NEXT"];
PATHS_SWAP_REVERTED -> REVERTING_NEW_RULES [ label="NEXT"];
PATHS_SWAP_REVERTED -> REVERTING_NEW_RULES [ label="ERROR"];
NEW_RULES_REVERTED -> REVERTING_ALLOCATED_RESOURCES [ label="NEXT"];
NEW_RULES_REVERTED -> REVERTING_ALLOCATED_RESOURCES [ label="ERROR"];
PROTECTED_RESOURCES_ALLOCATED -> RESOURCE_ALLOCATION_COMPLETED [ label="NEXT"];
PROTECTED_RESOURCES_ALLOCATED -> MARKING_FLOW_DOWN [ label="NO_PATH_FOUND"];
PROTECTED_RESOURCES_ALLOCATED -> REVERTING_ALLOCATED_RESOURCES [ label="TIMEOUT"];
PROTECTED_RESOURCES_ALLOCATED -> REVERTING_ALLOCATED_RESOURCES [ label="ERROR"];
RESOURCE_ALLOCATION_COMPLETED -> INSTALLING_NON_INGRESS_RULES [ label="NEXT"];
RESOURCE_ALLOCATION_COMPLETED -> FINISHED [ label="REROUTE_IS_SKIPPED"];
RESOURCE_ALLOCATION_COMPLETED -> REVERTING_ALLOCATED_RESOURCES [ label="TIMEOUT"];
RESOURCE_ALLOCATION_COMPLETED -> REVERTING_ALLOCATED_RESOURCES [ label="ERROR"];
OLD_RULES_REMOVED -> OLD_PATHS_REMOVAL_COMPLETED [ label="NEXT"];
NON_INGRESS_RULES_VALIDATED -> PATHS_SWAPPED [ label="NEXT"];
NON_INGRESS_RULES_VALIDATED -> REVERTING_PATHS_SWAP [ label="TIMEOUT"];
NON_INGRESS_RULES_VALIDATED -> REVERTING_PATHS_SWAP [ label="ERROR"];
RESOURCES_ALLOCATION_REVERTED -> REVERTING_FLOW_STATUS [ label="NEXT"];
RESOURCES_ALLOCATION_REVERTED -> REVERTING_FLOW_STATUS [ label="ERROR"];
OLD_RESOURCES_DEALLOCATED -> UPDATING_FLOW_STATUS [ label="NEXT"];
OLD_RESOURCES_DEALLOCATED -> UPDATING_FLOW_STATUS [ label="ERROR"];
UPDATING_FLOW_STATUS -> FLOW_STATUS_UPDATED [ label="NEXT"];
REMOVING_OLD_RULES -> REMOVING_OLD_RULES [ label="COMMAND_EXECUTED"];
REMOVING_OLD_RULES -> OLD_RULES_REMOVED [ label="RULES_REMOVED"];
REMOVING_OLD_RULES -> OLD_RULES_REMOVED [ label="ERROR"];
DEALLOCATING_OLD_RESOURCES -> OLD_RESOURCES_DEALLOCATED [ label="NEXT"];
REVERTING_ALLOCATED_RESOURCES -> RESOURCES_ALLOCATION_REVERTED [ label="NEXT"];
REVERTING_ALLOCATED_RESOURCES -> RESOURCES_ALLOCATION_REVERTED [ label="ERROR"];
INITIALIZED -> FLOW_VALIDATED [ label="NEXT"];
INITIALIZED -> FINISHED_WITH_ERROR [ label="TIMEOUT"];
VALIDATING_INGRESS_RULES -> VALIDATING_INGRESS_RULES [ label="COMMAND_EXECUTED"];
VALIDATING_INGRESS_RULES -> INGRESS_RULES_VALIDATED [ label="RULES_VALIDATED"];
VALIDATING_INGRESS_RULES -> REVERTING_PATHS_SWAP [ label="TIMEOUT"];
VALIDATING_INGRESS_RULES -> REVERTING_PATHS_SWAP [ label="MISSING_RULE_FOUND"];
VALIDATING_INGRESS_RULES -> REVERTING_PATHS_SWAP [ label="ERROR"];
INSTALLING_INGRESS_RULES -> INSTALLING_INGRESS_RULES [ label="COMMAND_EXECUTED"];
INSTALLING_INGRESS_RULES -> INGRESS_RULES_INSTALLED [ label="RULES_INSTALLED"];
INSTALLING_INGRESS_RULES -> INGRESS_RULES_VALIDATED [ label="INGRESS_IS_SKIPPED"];
INSTALLING_INGRESS_RULES -> REVERTING_PATHS_SWAP [ label="TIMEOUT"];
INSTALLING_INGRESS_RULES -> REVERTING_PATHS_SWAP [ label="ERROR"];
PRIMARY_RESOURCES_ALLOCATED -> PROTECTED_RESOURCES_ALLOCATED [ label="NEXT"];
PRIMARY_RESOURCES_ALLOCATED -> MARKING_FLOW_DOWN [ label="NO_PATH_FOUND"];
PRIMARY_RESOURCES_ALLOCATED -> REVERTING_ALLOCATED_RESOURCES [ label="TIMEOUT"];
PRIMARY_RESOURCES_ALLOCATED -> REVERTING_ALLOCATED_RESOURCES [ label="ERROR"];
FLOW_STATUS_UPDATED -> FINISHED [ label="NEXT"];
FLOW_STATUS_UPDATED -> FINISHED_WITH_ERROR [ label="ERROR"];
FLOW_VALIDATED -> PRIMARY_RESOURCES_ALLOCATED [ label="NEXT"];
FLOW_VALIDATED -> REVERTING_FLOW_STATUS [ label="TIMEOUT"];
FLOW_VALIDATED -> REVERTING_FLOW_STATUS [ label="ERROR"];
NEW_PATHS_INSTALLATION_COMPLETED -> REMOVING_OLD_RULES [ label="NEXT"];
NEW_PATHS_INSTALLATION_COMPLETED -> REVERTING_PATHS_SWAP [ label="TIMEOUT"];
NEW_PATHS_INSTALLATION_COMPLETED -> REVERTING_PATHS_SWAP [ label="ERROR"];
INGRESS_RULES_INSTALLED -> VALIDATING_INGRESS_RULES [ label="NEXT"];
INGRESS_RULES_INSTALLED -> REVERTING_PATHS_SWAP [ label="TIMEOUT"];
INGRESS_RULES_INSTALLED -> REVERTING_PATHS_SWAP [ label="ERROR"];
NON_INGRESS_RULES_INSTALLED -> VALIDATING_NON_INGRESS_RULES [ label="NEXT"];
NON_INGRESS_RULES_INSTALLED -> PATHS_SWAP_REVERTED [ label="TIMEOUT"];
NON_INGRESS_RULES_INSTALLED -> PATHS_SWAP_REVERTED [ label="ERROR"];
REVERTING_FLOW_STATUS -> FINISHED_WITH_ERROR [ label="NEXT"];
REVERTING_FLOW_STATUS -> FINISHED_WITH_ERROR [ label="ERROR"];
MARKING_FLOW_DOWN -> REVERTING_ALLOCATED_RESOURCES [ label="NEXT"];
OLD_PATHS_REMOVAL_COMPLETED -> DEALLOCATING_OLD_RESOURCES [ label="NEXT"];
OLD_PATHS_REMOVAL_COMPLETED -> DEALLOCATING_OLD_RESOURCES [ label="ERROR"];
INGRESS_RULES_VALIDATED -> NEW_PATHS_INSTALLATION_COMPLETED [ label="NEXT"];
INGRESS_RULES_VALIDATED -> REVERTING_PATHS_SWAP [ label="TIMEOUT"];
INGRESS_RULES_VALIDATED -> REVERTING_PATHS_SWAP [ label="ERROR"];}}

digraph {
    compound = true;
    subgraph cluster_StateMachine {
    label = "org.openkilda.wfm.topology.flowhs.fsm.haflow.create.HaFlowCreateFsm";
    NOTIFY_FLOW_MONITOR [label = "NOTIFY_FLOW_MONITOR"];
    NOTIFY_FLOW_MONITOR_WITH_ERROR [label = "NOTIFY_FLOW_MONITOR_WITH_ERROR"];
    NOTIFY_HA_FLOW_STATS [label = "NOTIFY_HA_FLOW_STATS"];
    INITIALIZED [label = "INITIALIZED"];
    REMOVING_RULES [label = "REMOVING_RULES"];
    RESOURCES_ALLOCATED [label = "RESOURCES_ALLOCATED"];
    FINISHED [label = "FINISHED"];
    FINISHED_WITH_ERROR [label = "FINISHED_WITH_ERROR"];
    RESOURCES_DEALLOCATED [label = "RESOURCES_DEALLOCATED"];
    REVERTING [label = "REVERTING"];
    HA_FLOW_VALIDATED [label = "HA_FLOW_VALIDATED"];
    INSTALLING_RULES [label = "INSTALLING_RULES"];
    FAILED [label = "FAILED"];

    NOTIFY_FLOW_MONITOR -> FINISHED [label = "NEXT"];
    NOTIFY_FLOW_MONITOR_WITH_ERROR -> FINISHED_WITH_ERROR [label = "NEXT"];
    NOTIFY_HA_FLOW_STATS -> NOTIFY_FLOW_MONITOR [label = "NEXT"];
    INITIALIZED -> HA_FLOW_VALIDATED [label = "NEXT"];
    REMOVING_RULES -> REMOVING_RULES [label = "RESPONSE_RECEIVED"];
    REMOVING_RULES -> REVERTING [label = "TIMEOUT"];
    REMOVING_RULES -> REVERTING [label = "ERROR"];
    REMOVING_RULES -> REVERTING [label = "RULES_REMOVED"];
    RESOURCES_ALLOCATED -> INITIALIZED [label = "RETRY"];
    RESOURCES_ALLOCATED -> REVERTING [label = "TIMEOUT"];
    RESOURCES_ALLOCATED -> REVERTING [label = "ERROR"];
    RESOURCES_ALLOCATED -> INSTALLING_RULES [label = "NEXT"];
    RESOURCES_DEALLOCATED -> FAILED [label = "ERROR"];
    RESOURCES_DEALLOCATED -> FAILED [label = "TIMEOUT"];
    RESOURCES_DEALLOCATED -> FAILED [label = "NEXT"];
    REVERTING -> RESOURCES_DEALLOCATED [label = "NEXT"];
    HA_FLOW_VALIDATED -> RESOURCES_ALLOCATED [label = "NEXT"];
    HA_FLOW_VALIDATED -> FINISHED_WITH_ERROR [label = "TIMEOUT"];
    HA_FLOW_VALIDATED -> FINISHED_WITH_ERROR [label = "ERROR"];
    INSTALLING_RULES -> NOTIFY_HA_FLOW_STATS [label = "SKIP_RULES_INSTALL"];
    INSTALLING_RULES -> INSTALLING_RULES [label = "RESPONSE_RECEIVED"];
    INSTALLING_RULES -> REMOVING_RULES [label = "TIMEOUT"];
    INSTALLING_RULES -> REMOVING_RULES [label = "ERROR"];
    INSTALLING_RULES -> NOTIFY_HA_FLOW_STATS [label = "RULES_INSTALLED"];
    FAILED -> NOTIFY_FLOW_MONITOR_WITH_ERROR [label = "NEXT"];
    FAILED -> RESOURCES_ALLOCATED [label = "RETRY"];
    FAILED -> NOTIFY_FLOW_MONITOR_WITH_ERROR [label = "ERROR"];
    FAILED -> NOTIFY_FLOW_MONITOR_WITH_ERROR [label = "TIMEOUT"];}}
